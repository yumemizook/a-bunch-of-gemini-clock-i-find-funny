<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrono-Grid Artifact: Void Script</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Noto+Sans+SC&family=Noto+Sans+JP&family=Noto+Sans+Devanagari&family=Noto+Sans+Gothic&family=Noto+Sans+Glagolitic&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* Default (Level 1) */
            --bg-color: #080808;
            --grid-bg: radial-gradient(circle at center, #111 0%, #000 100%);
            --text-off: #1a1a1a;
            --text-on: #e0e0e0;
            --accent-glow: #00ffcc;
            --accent-dim: rgba(0, 255, 204, 0.1);
            --scanline-opacity: 0.05;
            --font-main: 'Share Tech Mono', monospace;
            --cell-size: 40px;
            --grid-gap: 6px;
        }

        /* --- GLOBAL LAYOUT --- */
        body {
            background-color: var(--bg-color);
            background-image: var(--grid-bg);
            color: var(--text-on);
            font-family: var(--font-main);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 1.2s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Scanline Overlay */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 100;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            opacity: var(--scanline-opacity);
            transition: opacity 1s;
        }

        /* --- THE GRID --- */
        #grid-wrapper {
            position: relative;
            padding: 40px;
            border-radius: 20px;
            background: rgba(0, 0, 0, 0.3);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            transition: transform 0.8s, filter 0.8s, box-shadow 0.8s;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        #grid-container {
            display: grid;
            grid-template-columns: repeat(14, var(--cell-size));
            gap: var(--grid-gap);
            perspective: 1000px;
        }

        .char {
            width: var(--cell-size);
            height: var(--cell-size);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: var(--text-off);
            transition: color 0.4s, transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275), text-shadow 0.4s;
            user-select: none;
            position: relative;
        }

        .char.active {
            color: var(--text-on);
            text-shadow: 0 0 10px var(--accent-glow), 0 0 20px var(--accent-glow);
            font-weight: bold;
            z-index: 2;
        }

        /* --- UI CONTROLS --- */
        #ui-layer {
            margin-top: 40px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 101;
            padding: 20px 30px;
            background: rgba(10, 10, 10, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s;
        }

        .control-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.5);
            padding: 8px 12px;
            cursor: pointer;
            font-family: var(--font-main);
            font-size: 0.85rem;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            border-color: rgba(255, 255, 255, 0.6);
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
        }

        .btn.active {
            border-color: var(--accent-glow);
            color: var(--accent-glow);
            box-shadow: 0 0 15px var(--accent-dim);
            text-shadow: 0 0 8px var(--accent-glow);
            background: var(--accent-dim);
        }

        #status-bar {
            text-align: center;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 1px;
            text-transform: uppercase;
            min-height: 1.2em;
            transition: color 0.5s;
        }

        /* --- WARNING MODAL --- */
        #warning-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s;
        }

        #warning-modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            border: 2px solid #ff0000;
            padding: 40px;
            text-align: center;
            background: #110000;
            box-shadow: 0 0 50px #ff0000;
            max-width: 400px;
            color: #ff0000;
            font-family: 'Share Tech Mono', monospace;
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 4px;
            animation: blink 1s infinite;
        }

        .modal-text {
            font-size: 1rem;
            margin-bottom: 30px;
            line-height: 1.5;
            color: #ffaaaa;
        }

        .modal-btns {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .danger-btn {
            border: 1px solid #ff0000;
            background: transparent;
            color: #ff0000;
            padding: 10px 20px;
            cursor: pointer;
            text-transform: uppercase;
            font-family: inherit;
            transition: 0.2s;
        }

        .danger-btn:hover {
            background: #ff0000;
            color: #000;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        /* --- DIFFICULTY PALETTES --- */

        /* Level 1: Standard (Cyan) */
        body.lvl-1 {
            --bg-color: #05080a;
            --accent-glow: #00ffcc;
            --accent-dim: rgba(0, 255, 204, 0.1);
            --text-off: #0a2a24;
            --text-on: #e0fffa;
        }

        /* Level 2: Caution (Amber) */
        body.lvl-2 {
            --bg-color: #0f0a05;
            --accent-glow: #ffaa00;
            --accent-dim: rgba(255, 170, 0, 0.1);
            --text-off: #2e1e0a;
            --text-on: #ffecd1;
            --grid-bg: radial-gradient(circle at center, #1a1205 0%, #000 100%);
        }

        /* Level 3: Ice / Logic (Deep Blue) */
        body.lvl-3 {
            --bg-color: #020512;
            --accent-glow: #0088ff;
            --accent-dim: rgba(0, 136, 255, 0.15);
            --text-off: #05142b;
            --text-on: #d1eaff;
            --grid-bg: radial-gradient(circle at center, #050d26 0%, #000 100%);
        }

        /* Level 4: Chaos (Neon Pink/Purple) */
        body.lvl-4 {
            --bg-color: #0f050f;
            --accent-glow: #ff00ff;
            --accent-dim: rgba(255, 0, 255, 0.15);
            --text-off: #2b052b;
            --text-on: #ffd1ff;
            --grid-bg: radial-gradient(circle at center, #210521 0%, #000 100%);
        }

        /* Level 4.5: Global / Opulence (Gold) */
        body.lvl-4-5 {
            --bg-color: #0a0a0a;
            --accent-glow: #ffd700;
            --accent-dim: rgba(255, 215, 0, 0.1);
            --text-off: #292400;
            --text-on: #fffbe0;
            --grid-bg: radial-gradient(circle at center, #1f1c05 0%, #000 100%);
        }

        /* Level 5: The Void (Ultraviolet) */
        body.lvl-5 {
            --bg-color: #030005;
            --accent-glow: #9d00ff;
            --accent-dim: rgba(157, 0, 255, 0.15);
            --text-off: #180026;
            --text-on: #ecd1ff;
            --font-main: 'Times New Roman', serif;
            --grid-bg: radial-gradient(circle at center, #12001f 0%, #000 100%);
        }

        /* Level 6: Singularity (Hazard Red / Glagolitic) */
        body.lvl-6 {
            --bg-color: #000000;
            --grid-bg: #000;
            --text-off: #1a0000;
            --text-on: #ff0000;
            --accent-glow: #ff0000;
            --accent-dim: rgba(255, 0, 0, 0.2);
            --scanline-opacity: 0.3;
            --font-main: 'Noto Sans Glagolitic', sans-serif;
        }

        body.lvl-6 #grid-wrapper {
            animation: breathe 3s infinite ease-in-out;
            filter: contrast(130%) brightness(90%);
            box-shadow: 0 0 80px rgba(255, 0, 0, 0.15);
            border-color: #300;
        }

        body.lvl-6 .char.active {
            text-shadow: 2px 0 #ff0000, -2px 0 #880000;
            animation: jitter 0.1s infinite;
        }

        body.lvl-6 #status-bar {
            color: #ff0000;
            animation: blink 2s infinite;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        @keyframes jitter {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }

            20% {
                transform: translate(-1px, 1px);
                opacity: 0.8;
            }

            40% {
                transform: translate(1px, -1px);
                opacity: 1;
            }

            60% {
                transform: translate(0, 0);
                opacity: 1;
            }

            80% {
                transform: translate(1px, 0);
                opacity: 0.9;
            }

            100% {
                transform: translate(0, 0);
                opacity: 1;
            }
        }

        @media (max-width: 700px) {
            :root {
                --cell-size: 24px;
                --grid-gap: 3px;
            }

            #grid-container {
                grid-template-columns: repeat(12, var(--cell-size));
            }

            #ui-layer {
                width: 90%;
                padding: 15px;
            }
        }
    </style>
</head>

<body class="lvl-1">

    <div id="grid-wrapper">
        <div id="grid-container"></div>
    </div>

    <div id="ui-layer">
        <div class="control-row">
            <button class="btn mode-btn active" onclick="setMode('time')">Time</button>
            <button class="btn mode-btn" onclick="setMode('date')">Date</button>
        </div>

        <div class="control-row">
            <button class="btn diff-btn active" data-lvl="1" onclick="setDifficulty(1)">I</button>
            <button class="btn diff-btn" data-lvl="2" onclick="setDifficulty(2)">II</button>
            <button class="btn diff-btn" data-lvl="3" onclick="setDifficulty(3)">III</button>
            <button class="btn diff-btn" data-lvl="4" onclick="setDifficulty(4)">IV</button>
            <button class="btn diff-btn" data-lvl="4.5" onclick="setDifficulty(4.5)">IV+</button>
            <button class="btn diff-btn" data-lvl="5" onclick="setDifficulty(5)">V</button>
            <button class="btn diff-btn" data-lvl="6" onclick="setDifficulty(6)">VI</button>
        </div>

        <div id="status-bar">System Normal</div>
    </div>

    <!-- WARNING MODAL -->
    <div id="warning-modal">
        <div class="modal-content">
            <div class="modal-title">WARNING</div>
            <div class="modal-text">
                Cognitive Hazard Detected.<br><br>
                Level VI utilizes corrupted Glagolitic data streams. Output will be unintelligible to standard
                linguistic processors.<br><br>
                Are you sure you want to proceed?
            </div>
            <div class="modal-btns">
                <button class="danger-btn" onclick="cancelLvl6()">ABORT</button>
                <button class="danger-btn" onclick="confirmLvl6()">PROCEED</button>
            </div>
        </div>
    </div>

    <script>
        const state = {
            mode: 'time',
            difficulty: 1,
            warnedLvl6: false,
            pendingDifficulty: null
        };

        const container = document.getElementById('grid-container');
        const statusLabel = document.getElementById('status-bar');
        const body = document.body;
        const modal = document.getElementById('warning-modal');

        // --- LANGUAGE CONFIG ---
        const LANGS_CORE = ['en', 'es', 'fr', 'de'];
        const LANGS_EXTENDED = ['en', 'es', 'fr', 'de', 'it', 'pt', 'ru', 'zh', 'ja', 'hi'];

        // --- MAPPINGS ---

        // Level 6: Glagolitic Map (English A-Z to Glagolitic)
        const VOID_MAP = {
            'A': 'Ⰰ', 'B': 'Ⰱ', 'C': 'Ⱌ', 'D': 'Ⰴ', 'E': 'Ⰵ', 'F': 'Ⱇ', 'G': 'Ⰳ',
            'H': 'Ⱒ', 'I': 'Ⰶ', 'J': 'Ⰼ', 'K': 'Ⰽ', 'L': 'Ⰻ', 'M': 'Ⰿ', 'N': 'Ⱀ',
            'O': 'Ⱎ', 'P': 'Ⱏ', 'Q': 'Ⱐ', 'R': 'Ⱃ', 'S': 'Ⱄ', 'T': 'Ⱅ', 'U': 'Ⱆ',
            'V': 'Ⰲ', 'W': 'Ⱈ', 'X': 'Ⱉ', 'Y': 'Ⱘ', 'Z': 'Ⱙ', ' ': ' '
        };
        const VOID_ALPHABET = "ⰀⰁⰂⰃⰄⰅⰆⰇⰈⰉⰊⰋⰌⰍⰎⰏⰐⰑⰒⰓⰔⰕⰖⰗⰘⰙⰚⰛⰜⰝⰞⰟⰠⰡⰢⰣⰤⰥⰦⰧⰨⰩⰪⰫⰬⰭⰮ";

        // --- DICTIONARIES (Western & Eastern Logic) ---
        const STRINGS = {
            en: { type: 'western', alpha: 'latin', it_is: "IT IS", past: "PAST", to: "TO", oclock: "OCLOCK", mins: "MINUTES", sec: "SECONDS", and: "AND", nums: ["ZERO", "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE", "TEN", "ELEVEN", "TWELVE", "THIRTEEN", "FOURTEEN", "QUARTER", "SIXTEEN", "SEVENTEEN", "EIGHTEEN", "NINETEEN", "TWENTY", "TWENTY ONE", "TWENTY TWO", "TWENTY THREE", "TWENTY FOUR", "TWENTY FIVE", "TWENTY SIX", "TWENTY SEVEN", "TWENTY EIGHT", "TWENTY NINE", "HALF"], months: ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"], days: ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY"] },
            es: { type: 'western', alpha: 'latin', it_is: "SON LAS", past: "Y", to: "MENOS", oclock: "EN PUNTO", mins: "MINUTOS", sec: "SEGUNDOS", and: "Y", nums: ["CERO", "UNA", "DOS", "TRES", "CUATRO", "CINCO", "SEIS", "SIETE", "OCHO", "NUEVE", "DIEZ", "ONCE", "DOCE", "TRECE", "CATORCE", "CUARTO", "DIECISEIS", "DIECISIETE", "DIECIOCHO", "DIECINUEVE", "VEINTE", "VEINTIUNO", "VEINTIDOS", "VEINTITRES", "VEINTICUATRO", "VEINTICINCO", "VEINTISEIS", "VEINTISIETE", "VEINTIOCHO", "VEINTINUEVE", "MEDIA"], months: ["ENERO", "FEBRERO", "MARZO", "ABRIL", "MAYO", "JUNIO", "JULIO", "AGOSTO", "SEPTIEMBRE", "OCTUBRE", "NOVIEMBRE", "DICIEMBRE"], days: ["DOMINGO", "LUNES", "MARTES", "MIERCOLES", "JUEVES", "VIERNES", "SABADO"] },
            fr: { type: 'western', alpha: 'latin', it_is: "IL EST", past: "PASSE", to: "MOINS", oclock: "HEURES", mins: "MINUTES", sec: "SECONDES", and: "ET", nums: ["ZERO", "UNE", "DEUX", "TROIS", "QUATRE", "CINQ", "SIX", "SEPT", "HUIT", "NEUF", "DIX", "ONZE", "DOUZE", "TREIZE", "QUATORZE", "QUART", "SEIZE", "DIX SEPT", "DIX HUIT", "DIX NEUF", "VINGT", "VINGT ET UN", "VINGT DEUX", "VINGT TROIS", "VINGT QUATRE", "VINGT CINQ", "VINGT SIX", "VINGT SEPT", "VINGT HUIT", "VINGT NEUF", "DEMIE"], months: ["JANVIER", "FEVRIER", "MARS", "AVRIL", "MAI", "JUIN", "JUILLET", "AOUT", "SEPTEMBRE", "OCTOBRE", "NOVEMBRE", "DECEMBRE"], days: ["DIMANCHE", "LUNDI", "MARDI", "MERCREDI", "JEUDI", "VENDREDI", "SAMEDI"] },
            de: { type: 'western', alpha: 'latin', it_is: "ES IST", past: "NACH", to: "VOR", oclock: "UHR", mins: "MINUTEN", sec: "SEKUNDEN", and: "UND", nums: ["NULL", "EINS", "ZWEI", "DREI", "VIER", "FÜNF", "SECHS", "SIEBEN", "ACHT", "NEUN", "ZEHN", "ELF", "ZWÖLF", "DREIZEHN", "VIERZEHN", "VIERTEL", "SECHZEHN", "SIEBZEHN", "ACHTZEHN", "NEUNZEHN", "ZWANZIG", "EINUNDZWANZIG", "ZWEIUNDZWANZIG", "DREIUNDZWANZIG", "VIERUNDZWANZIG", "FÜNFUNDZWANZIG", "SECHSUNDZWANZIG", "SIEBENUNDZWANZIG", "ACHTUNDZWANZIG", "NEUNUNDZWANZIG", "HALB"], months: ["JANUAR", "FEBRUAR", "MÄRZ", "APRIL", "MAI", "JUNI", "JULI", "AUGUST", "SEPTEMBER", "OKTOBER", "NOVEMBER", "DEZEMBER"], days: ["SONNTAG", "MONTAG", "DIENSTAG", "MITTWOCH", "DONNERSTAG", "FREITAG", "SAMSTAG"] },
            it: { type: 'western', alpha: 'latin', it_is: "SONO LE", past: "E", to: "MENO", oclock: "", mins: "MINUTI", sec: "SECONDI", and: "E", nums: ["ZERO", "UNA", "DUE", "TRE", "QUATTRO", "CINQUE", "SEI", "SETTE", "OTTO", "NOVE", "DIECI", "UNDICI", "DODICI", "TREDICI", "QUATTORDICI", "UN QUARTO", "SEDICI", "DICIASSETTE", "DICIOTTO", "DICIANNOVE", "VENTI", "VENTUNO", "VENTIDUE", "VENTITRE", "VENTIQUATTRO", "VENTICINQUE", "VENTISEI", "VENTISETTE", "VENTIOTTO", "VENTINOVE", "MEZZA"], months: ["GENNAIO", "FEBBRAIO", "MARZO", "APRILE", "MAGGIO", "GIUGNO", "LUGLIO", "AGOSTO", "SETTEMBRE", "OTTOBRE", "NOVEMBRE", "DICEMBRE"], days: ["DOMENICA", "LUNEDI", "MARTEDI", "MERCOLEDI", "GIOVEDI", "VENERDI", "SABATO"] },
            pt: { type: 'western', alpha: 'latin', it_is: "SAO AS", past: "E", to: "PARA AS", oclock: "HORAS", mins: "MINUTOS", sec: "SEGUNDOS", and: "E", nums: ["ZERO", "UMA", "DUAS", "TRES", "QUATRO", "CINCO", "SEIS", "SETE", "OITO", "NOVE", "DEZ", "ONZE", "DOZE", "TREZE", "QUATORZE", "QUARTO", "DEZESSEIS", "DEZESSETE", "DEZOITO", "DEZENOVE", "VINTE", "VINTE E UM", "VINTE E DOIS", "VINTE E TRES", "VINTE E QUATRO", "VINTE E CINCO", "VINTE E SEIS", "VINTE E SETE", "VINTE E OITO", "VINTE E NOVE", "MEIA"], months: ["JANEIRO", "FEVEREIRO", "MARCO", "ABRIL", "MAIO", "JUNHO", "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"], days: ["DOMINGO", "SEGUNDA", "TERCA", "QUARTA", "QUINTA", "SEXTA", "SABADO"] },
            ru: { type: 'western', alpha: 'ru', it_is: "SEYCHAS", past: "POSLE", to: "DO", oclock: "CHASOV", mins: "MINUT", sec: "SEKUND", and: "I", nums: ["NOL", "ODIN", "DVA", "TRI", "CHETYRE", "PYAT", "SHEST", "SEM", "VOSEM", "DEVYAT", "DESYAT", "ODINNADTSAT", "DVENADTSAT", "TRINADTSAT", "CHETYRNADTSAT", "PYATNADTSAT", "SHESTNADTSAT", "SEMNADTSAT", "VOSEMNADTSAT", "DEVYATNADTSAT", "DVADTSAT", "21", "22", "23", "24", "25", "26", "27", "28", "29", "TRIDTSAT"], months: ["YANVAR", "FEVRAL", "MART", "APREL", "MAY", "IYUN", "IYUL", "AVGUST", "SENTYABR", "OKTYABR", "NOYABR", "DEKABR"], days: ["VS", "PN", "VT", "SR", "CH", "PT", "SB"] },
            zh: { type: 'eastern', alpha: 'zh', it_is: "现在是", past: "", to: "", oclock: "点", mins: "分", sec: "秒", and: "", nums: ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二", "十三", "十四", "十五", "十六", "十七", "十八", "十九", "二十", "二十一", "二十二", "二十三", "二十四", "二十五", "二十六", "二十七", "二十八", "二十九", "三十"], months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"], days: ["周日", "周一", "周二", "周三", "周四", "周五", "周六"] },
            ja: { type: 'eastern', alpha: 'ja', it_is: "只今", past: "", to: "", oclock: "時", mins: "分", sec: "秒", and: "", nums: ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二", "十三", "十四", "十五", "十六", "十七", "十八", "十九", "二十", "二十一", "二十二", "二十三", "二十四", "二十五", "二十六", "二十七", "二十八", "二十九", "三十"], months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"], days: ["日", "月", "火", "水", "木", "金", "土"] },
            hi: { type: 'western', alpha: 'hi', it_is: "AB", past: "BAJKAR", to: "BAJNE ME", oclock: "BAJE", mins: "MIN", sec: "SEC", and: "AUR", nums: ["SHUNYA", "EK", "DO", "TEEN", "CHAAR", "PAANCH", "CHAH", "SAAT", "AATH", "NAU", "DAS", "GYARAH", "BARAH", "TERAH", "CHAUDAH", "PANDRAH", "SOLAH", "SATRAH", "ATHARAH", "UNNIS", "BEES", "IKKIS", "BAIS", "TEIS", "CHAUBIS", "PACHCHIS", "CHHABIS", "SATTAIS", "ATTAIS", "UNATTIS", "SAADE"], months: ["JAN", "FEB", "MAR", "APR", "MAI", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"], days: ["RAVI", "SOM", "MANGAL", "BUDH", "GURU", "SHUKRA", "SHANI"] }
        };

        // --- ALPHABETS ---
        const ALPHABETS = {
            latin: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
            ru: "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ",
            zh: "的一是了我不人在他有这个上们来到时大地为子中你说生国年着就那和要",
            ja: "あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわをん",
            hi: "अआइईउऊऋएऐओऔकखगघङचछजझञटठडढणतथदधनपफबभमयरलवशषसह",
            runes: "ᚠᚢᚦᚨᚱᚲᚷᚹᚻᚾᛁᛃᛇᛈᛉᛋᛏᛒᛖᛗᛚᛜᛞᛟ",
            void: VOID_ALPHABET
        };

        // --- UTILS ---
        function corruptText(text) {
            const chars = text.split('');
            const marks = ['\u0300', '\u0301', '\u0302', '\u0303', '\u0304', '\u0305', '\u0306', '\u0307', '\u0308', '\u0309', '\u030A', '\u030B', '\u030C', '\u030D', '\u030E', '\u030F'];
            return chars.map(c => {
                if (c === ' ') return ' ';
                let corrupted = c;
                let num = Math.floor(Math.random() * 2) + 1;
                for (let i = 0; i < num; i++) {
                    corrupted += marks[Math.floor(Math.random() * marks.length)];
                }
                return corrupted;
            }).join('');
        }

        function numberToWord(num, lang) {
            const d = STRINGS[lang];
            if (num > 30) {
                let rem = num - 30;
                if (lang === 'zh' || lang === 'ja') return "三十" + d.nums[rem];
                return d.nums[rem] || num.toString();
            }
            return d.nums[num];
        }

        // --- GENERATORS ---
        function generateTime(lang) {
            const now = new Date();
            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            const d = STRINGS[lang];
            let words = [d.it_is];

            if (d.type === 'eastern') {
                words.push(numberToWord(h % 12 || 12, lang));
                words.push(d.oclock);
                if (m !== 0) { words.push(numberToWord(m, lang)); words.push(d.mins); }
                if (s > 0) { words.push(numberToWord(s, lang)); words.push(d.sec); }
            } else {
                let displayHour = h;
                if (m === 0) {
                    words.push(numberToWord(h % 12 || 12, lang, true));
                    if (d.oclock) words.push(d.oclock);
                } else if (m <= 30) {
                    words.push(numberToWord(m, lang));
                    if (d.mins && !(m === 15 || m === 30)) words.push(d.mins);
                    words.push(d.past);
                    words.push(numberToWord(h % 12 || 12, lang, true));
                } else {
                    words.push(numberToWord(60 - m, lang));
                    if (d.mins && !((60 - m) === 15 || (60 - m) === 30)) words.push(d.mins);
                    words.push(d.to);
                    words.push(numberToWord((h + 1) % 12 || 12, lang, true));
                }
                if (s > 0) {
                    words.push(d.and);
                    let sv = s > 30 ? s - 30 : s; if (sv === 0) sv = 30;
                    words.push(numberToWord(sv, lang));
                    words.push(d.sec);
                }
            }
            return { text: words.join(" ").toUpperCase(), alpha: d.alpha };
        }

        function generateDate(lang) {
            const now = new Date();
            const d = STRINGS[lang];
            let words = [d.days[now.getDay()], d.months[now.getMonth()]];
            let dateNum = now.getDate();
            if (dateNum <= 30) words.push(numberToWord(dateNum, lang));
            else words.push(lang === 'zh' || lang === 'ja' ? "三十一" : "THIRTY ONE");
            return { text: words.join(" ").toUpperCase(), alpha: d.alpha };
        }

        // --- RENDER ---
        function render() {
            const now = new Date();
            let lang = 'en';
            let currentAlpha = 'latin';

            if (state.difficulty === 4) lang = LANGS_CORE[Math.floor(now.getSeconds() / 15) % LANGS_CORE.length];
            else if (state.difficulty === 4.5) lang = LANGS_EXTENDED[Math.floor(now.getSeconds() / 10) % LANGS_EXTENDED.length];

            let res = state.mode === 'time' ? generateTime(lang) : generateDate(lang);
            let phrase = res.text.replace(/\s+/g, ' ').trim();
            currentAlpha = res.alpha;

            if (state.difficulty === 3) {
                let shift = now.getMinutes() % 5;
                phrase = phrase.split('').map(c => {
                    let code = c.charCodeAt(0);
                    return (code >= 65 && code <= 90) ? String.fromCharCode(((code - 65 + shift) % 26) + 65) : c;
                }).join('');
            }
            if (state.difficulty === 5) {
                currentAlpha = 'runes';
                phrase = phrase.split('').map(c => ALPHABETS.runes[c.charCodeAt(0) % ALPHABETS.runes.length]).join('');
            }
            if (state.difficulty === 6) {
                currentAlpha = 'void';
                // 1. Get Base English Text
                let r = state.mode === 'time' ? generateTime('en') : generateDate('en');
                let baseText = r.text.replace(/\s+/g, ' ').trim();
                // 2. Map to Glagolitic
                let voidText = baseText.split('').map(c => VOID_MAP[c] || c).join('');
                // 3. Corrupt
                phrase = corruptText(voidText);
            }

            const cols = 14;
            const rows = 10;
            const total = cols * rows;
            const alphaStr = ALPHABETS[currentAlpha] || ALPHABETS.latin;

            let html = '';

            // Handling phrase splitting for corrupted text is tricky because one "letter" is multiple chars
            // But for visual glitch art, simple char splitting is acceptable
            let displayPhrase = phrase;

            // For Level 6, since we constructed it carefully, we can split by base+marks if we wanted perfect grid alignment
            // But the "overflow" effect of Zalgo contributes to the horror.
            // However, to keep the grid somewhat stable, we need to try and fill cells.

            // Strategy: We rely on the fact that `phrase` length roughly matches the letters.
            // Since we mapped 1 char -> 1 Glagolitic -> + Marks, splitting by combining char clusters is hard in JS without Intl.Segmenter

            // Simple Fix: We will assume the "Active" cells correspond to the indexes of the ORIGINAL string length
            // and we insert the FULL corrupted glyph into that cell.

            let activeGlyphs = [];
            if (state.difficulty === 6) {
                // Re-generate base for counting
                let r = state.mode === 'time' ? generateTime('en') : generateDate('en');
                let base = r.text.replace(/\s+/g, ' ').trim();
                let baseArr = base.split('');
                activeGlyphs = baseArr.map(c => {
                    let g = VOID_MAP[c] || c;
                    return corruptText(g);
                });
            } else {
                activeGlyphs = phrase.split('');
            }

            let phraseIdx = 0;

            for (let i = 0; i < total; i++) {
                let char = '';
                let active = false;
                let styles = [];

                if (phraseIdx < activeGlyphs.length) {
                    const glyph = activeGlyphs[phraseIdx];
                    if (glyph !== ' ') {
                        char = glyph;
                        active = true;
                    } else {
                        char = alphaStr[Math.floor(Math.random() * alphaStr.length)];
                        if (state.difficulty === 6) char = corruptText(char); // Corrupt noise too
                    }
                    phraseIdx++;
                } else {
                    char = alphaStr[Math.floor(Math.random() * alphaStr.length)];
                    if (state.difficulty === 6 && Math.random() > 0.7) char = corruptText(char); // Corrupt some noise
                }

                if (state.difficulty === 2 || state.difficulty >= 4.5) {
                    let rot = state.difficulty === 2 ? [0, 90, 180, 270][Math.floor(Math.random() * 4)] : (Math.random() * 20 - 10);
                    styles.push(`transform: rotate(${rot}deg)`);
                }

                if (state.difficulty === 6) {
                    if (!active && Math.random() > 0.8) styles.push(`opacity: 0.2`);
                }

                html += `<div class="char ${active ? 'active' : ''}" style="${styles.join(';')}">${char}</div>`;
            }

            container.innerHTML = html;
            updateUI(lang);
        }

        function updateUI(lang) {
            const d = state.difficulty;
            let txt = `Level ${d}: `;

            if (d === 1) txt += "Standard Protocol";
            if (d === 2) txt += "Orientation Error";
            if (d === 3) txt += "Encryption Active";
            if (d === 4) txt += "Language Cycle";
            if (d === 4.5) txt += `Global Cycle [${lang.toUpperCase()}]`;
            if (d === 5) txt += "Runic Translation";
            if (d === 6) txt += "CRITICAL SYSTEM FAILURE";

            statusLabel.innerText = txt;

            let classVal = d;
            if (d === 4.5) classVal = '4-5';
            body.className = `lvl-${classVal}`;
        }

        // --- INTERACTIONS & WARNING LOGIC ---

        window.setMode = (m) => {
            state.mode = m;
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            render();
        };

        window.setDifficulty = (d) => {
            if (d === 6 && !state.warnedLvl6) {
                modal.classList.add('show');
                return;
            }
            applyDifficulty(d);
        };

        function applyDifficulty(d) {
            state.difficulty = d;
            document.querySelectorAll('.diff-btn').forEach(b => {
                b.classList.remove('active');
                if (parseFloat(b.dataset.lvl) === d) b.classList.add('active');
            });
            render();
        }

        window.confirmLvl6 = () => {
            state.warnedLvl6 = true;
            modal.classList.remove('show');
            applyDifficulty(6);
        };

        window.cancelLvl6 = () => {
            modal.classList.remove('show');
            document.querySelectorAll('.diff-btn').forEach(b => {
                b.classList.remove('active');
                if (parseFloat(b.dataset.lvl) === state.difficulty) b.classList.add('active');
            });
        };

        setInterval(render, 1000);
        render();

    </script>
</body>

</html>